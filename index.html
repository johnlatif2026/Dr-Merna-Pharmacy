<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ØµÙŠØ¯Ù„ÙŠØ© Ø¯ÙƒØªÙˆØ±Ø© Ù…ÙŠØ±Ù†Ø§</title>
  <style>
    :root {
      --bg-light:#f4f7fb; --card-light:#fff; --text-light:#0b1220;
      --bg-dark:#0b1220; --card-dark:#1c2430; --text-dark:#f4f7fb;
      --accent:#0066FF; --muted:#6b7280; --radius:14px;
    }

    [data-theme='light'] {
      --bg: var(--bg-light);
      --card: var(--card-light);
      --text: var(--text-light);
    }
    [data-theme='dark'] {
      --bg: var(--bg-dark);
      --card: var(--card-dark);
      --text: var(--text-dark);
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, Arial;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 28px;
      transition: background 0.3s, color 0.3s;
    }

    .wrap { max-width: 960px; margin: auto; }

    header {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 24px; gap: 12px;
    }

    .brand {
      display: flex; align-items: center; gap: 12px;
    }

    .logo {
      width: 56px; height: 56px;
      border-radius: 12px;
      background: linear-gradient(135deg,var(--accent),#7c3aed);
      display:flex; align-items:center; justify-content:center;
      color:#fff; font-weight:900; font-size:20px;
    }

    .toggle-btn {
      background: var(--card);
      border: 1px solid #e6eef8;
      padding: 8px 14px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.3s;
    }

    .toggle-btn:hover {
      background: #eef5ff;
    }

    .card {
      background: var(--card);
      padding: 18px;
      border-radius: var(--radius);
      box-shadow: 0 8px 30px rgba(11,17,36,0.06);
      transition: background 0.3s;
    }

    .grid { display: grid; grid-template-columns: 1fr 320px; gap: 18px; }

    input, textarea {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #e6eef8;
      margin-top: 8px;
      font-family: inherit;
    }

    button.primary {
      background: var(--accent);
      color: #fff;
      border: none;
      padding: 12px 16px;
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      margin-top: 10px;
    }

    .muted { color: var(--muted); }

    .products {
      display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;
    }

    .product {
      background: #fbfdff;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #eef5ff;
      min-width: 150px;
    }

    footer {
      margin-top: 24px;
      text-align: center;
      color: var(--muted);
    }

    @media(max-width:900px){
      .grid { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body data-theme="light">
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">PH</div>
        <div>
          <div style="font-weight:900;font-size:18px">ØµÙŠØ¯Ù„ÙŠØ© Ø¯ÙƒØªÙˆØ±Ø© Ù…ÙŠØ±Ù†Ø§</div>
          <div class="muted">ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ â€” Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø¯ÙˆØ§Ø¦ÙŠØ©</div>
        </div>
      </div>
      <button id="themeToggle" class="toggle-btn">ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†</button>
    </header>

    <main class="grid">
      <section class="card">
        <h2>Ø§Ø·Ù„Ø¨ Ø¯ÙˆØ§Ø¡Ùƒ Ø§Ù„Ø¢Ù†</h2>
        <p class="muted">Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ§Ø¡ ÙˆØ§Ù„ÙƒÙ…ÙŠØ© ÙˆØ³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø³Ø¹Ø± ÙˆØ§Ù„ØªÙˆØµÙŠÙ„.</p>
        <form id="orderForm">
          <input name="name" placeholder="Ø§Ù„Ø§Ø³Ù…" required>
          <input name="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required>
          <textarea name="note" placeholder="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ (Ù…Ø«Ù„Ø§Ù‹: Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„ 20 ÙƒØ¨Ø³ÙˆÙ„Ø©)"></textarea>
          <button class="primary" type="submit">Ø£Ø±Ø³Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
        </form>
        <div id="msg" style="margin-top:12px;color:green;font-weight:700"></div>

        <h3 style="margin-top:18px">Ù…Ù†ØªØ¬Ø§Øª Ø´Ø§Ø¦Ø¹Ø©</h3>
        <div id="productsList" class="products"></div>
      </section>

      <aside class="card">
        <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„</h3>
        <p class="muted">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: <a id="mapsLink" href="#" target="_blank" class="muted" style="font-weight:700;color:var(--accent)">Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</a></p>

        <h4 style="margin-top:12px">Ø®Ø¯Ù…Ø§ØªÙ†Ø§</h4>
        <ul class="muted">
          <li>ØªÙˆØµÙŠÙ„ Ù…Ø­Ù„ÙŠ</li>
          <li>Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø¯ÙˆØ§Ø¦ÙŠØ©</li>
          <li>Ù…Ù†ØªØ¬Ø§Øª ØªØ¬Ù…ÙŠÙ„ ÙˆÚ¤ÙŠØªØ§Ù…ÙŠÙ†Ø§Øª</li>
        </ul>
      </aside>
    </main>

    <footer>Â© <span id="year"></span> Dr-Merna-Pharmacy â€” Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</footer>
  </div>

  <script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©
    const MAP_LINK = 'https://www.google.com/maps?q=pharmacy';
    document.getElementById('mapsLink').href = MAP_LINK;
    document.getElementById('year').innerText = new Date().getFullYear();

    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† ÙˆØ§Ù„ÙØ§ØªØ­
    const themeBtn = document.getElementById('themeToggle');
    const root = document.body;
    let currentTheme = localStorage.getItem('theme') || 'light';
    root.dataset.theme = currentTheme;
    themeBtn.innerText = currentTheme === 'dark' ? 'â˜€ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­' : 'ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†';

    themeBtn.addEventListener('click', ()=>{
      currentTheme = (currentTheme === 'light') ? 'dark' : 'light';
      root.dataset.theme = currentTheme;
      localStorage.setItem('theme', currentTheme);
      themeBtn.innerText = currentTheme === 'dark' ? 'â˜€ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­' : 'ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†';
    });

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
    document.getElementById('orderForm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const f = e.target;
      const data = {
        name: f.name.value.trim(),
        phone: f.phone.value.trim(),
        note: f.note.value.trim()
      };
      if (!data.name || !data.phone) return alert('Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø·Ù„ÙˆØ¨Ø§Ù†');

      try {
        const res = await fetch('/api/orders', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify(data)
        });
        const j = await res.json();
        if (j.ok) {
          document.getElementById('msg').innerText = 'âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!';
          f.reset();
        } else alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.');
      } catch {
        alert('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….');
      }
    });

    // Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (ØªØ¬Ø±ÙŠØ¨ÙŠØ©)
    const products = [
      {name:'Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„ 500 Ù…Ø¬', price:'EGP 20'},
      {name:'ÙÙŠØªØ§Ù…ÙŠÙ† Ø³ÙŠ 1000', price:'EGP 120'},
      {name:'ÙƒØ±ÙŠÙ… Ù…Ø±Ø·Ø¨', price:'EGP 80'}
    ];

    const list = document.getElementById('productsList');
    products.forEach(p=>{
      const d = document.createElement('div');
      d.className='product';
      d.innerHTML = `<strong>${p.name}</strong><div style="color:#0b6df0;font-weight:700">${p.price}</div>`;
      list.appendChild(d);
    });
  </script>
</body>
</html>
   document.title = `ØµÙŠØ¯Ù„ÙŠØ© â€” ${PHARMACY_NAME}`;
    document.getElementById('phoneNumber').innerText = PHONE_NUMBER;
    document.getElementById('addressLink').href = MAP_LINK;
    document.getElementById('mapsLink').href = MAP_LINK;
    document.getElementById('year').innerText = new Date().getFullYear();

    // Whatsapp links
    const waBtn = document.getElementById('waBtn');
    const waLink = document.getElementById('waLink');
    function openWhatsAppWith(text='Ù…Ø±Ø­Ø¨Ù‹Ø§ØŒ Ø£Ø±ÙŠØ¯ Ø·Ù„Ø¨ Ø¯ÙˆØ§Ø¡'){
      const base = `https://wa.me/${WHATSAPP_NUMBER}`;
      const url = `${base}?text=${encodeURIComponent(text)}`;
      window.open(url,'_blank');
    }
    waBtn.addEventListener('click',()=> openWhatsAppWith());
    waLink.addEventListener('click',(e)=>{ e.preventDefault(); openWhatsAppWith(); });

    // ===== Products sample data (Arabic + English) =====
    const products = [
      {id:1,ar:{name:'Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„ 500 Ù…Ø¬',desc:'Ù…Ø³ÙƒÙ† ÙˆØ®Ø§ÙØ¶ Ù„Ù„Ø­Ø±Ø§Ø±Ø©',price:'EGP 20'},en:{name:'Paracetamol 500mg',desc:'Painkiller & fever reducer',price:'EGP 20'}},
      {id:2,ar:{name:'ÙÙŠØªØ§Ù…ÙŠÙ† Ø³ÙŠ 1000',desc:'Ù…ÙƒÙ…Ù„ ØºØ°Ø§Ø¦ÙŠ',price:'EGP 120'},en:{name:'Vitamin C 1000',desc:'Dietary supplement',price:'EGP 120'}},
      {id:3,ar:{name:'ÙƒØ±ÙŠÙ… Ù…Ø±Ø·Ø¨',desc:'Ù„Ù„Ø¨Ø´Ø±Ø© Ø§Ù„Ø¬Ø§ÙØ©',price:'EGP 80'},en:{name:'Moisturizing cream',desc:'For dry skin',price:'EGP 80'}},
    ];

    const productsGrid = document.getElementById('productsGrid');
    function renderProducts(lang='ar'){
      productsGrid.innerHTML = '';
      products.forEach(p=>{
        const div = document.createElement('div'); div.className='product card';
        div.innerHTML = `
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="name">${lang==='ar'?p.ar.name:p.en.name}</div>
              <div class="muted" style="font-size:13px">${lang==='ar'?p.ar.desc:p.en.desc}</div>
            </div>
            <div style="text-align:right">
              <div class="price">${lang==='ar'?p.ar.price:p.en.price}</div>
              <div style="margin-top:8px"><button class="btn" onclick="quickOrder(${p.id})">Ø§Ø·Ù„Ø¨</button></div>
            </div>
          </div>
        `;
        productsGrid.appendChild(div);
      });
    }

    // Quick order from product
    window.quickOrder = function(id){
      const prod = products.find(x=>x.id===id);
      const text = `Ø£ÙˆØ¯ Ø·Ù„Ø¨: ${prod.ar.name} - ${prod.ar.price}`;
      openWhatsAppWith(text);
    }

    // ===== Modal order handling =====
    const modalBg = document.getElementById('modalBg');
    const orderBtn = document.getElementById('orderBtn');
    const orderBtn2 = document.getElementById('orderBtn2');
    const closeModal = document.getElementById('closeModal');
    orderBtn.addEventListener('click',()=> modalBg.style.display='flex');
    orderBtn2.addEventListener('click',()=> modalBg.style.display='flex');
    closeModal.addEventListener('click',()=> modalBg.style.display='none');
    document.getElementById('orderForm').addEventListener('submit',(e)=>{
      e.preventDefault();
      const data = new FormData(e.target);
      const name = data.get('name') || '';
      const phone = data.get('phone') || '';
      const note = data.get('note') || '';
      const text = `Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯\nØ§Ù„Ø§Ø³Ù…: ${name}\nØ§Ù„Ù‡Ø§ØªÙ: ${phone}\nØ§Ù„Ø·Ù„Ø¨: ${note}`;
      openWhatsAppWith(text);
      modalBg.style.display='none';
      alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ â€” ØªØ£ÙƒØ¯ Ù…Ù† ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ');
    });

    // Theme toggle and language toggle
    const themeBtn = document.getElementById('themeBtn');
    const langBtn = document.getElementById('langBtn');

    function setTheme(theme){
      document.documentElement.setAttribute('data-theme', theme);
      localStorage.setItem('theme',theme);
      themeBtn.innerText = theme==='dark' ? 'Ø¯Ø§ÙƒÙ†' : 'ÙØ§ØªØ­';
    }
    function setLang(lang){
      localStorage.setItem('lang',lang);
      if(lang==='ar'){
        document.documentElement.lang = 'ar';
        document.documentElement.dir = 'rtl';
        document.getElementById('heroTitle').innerText = `Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ ${PHARMACY_NAME}`;
        document.getElementById('heroDesc').innerText = 'ØµÙŠØ¯Ù„ÙŠØ© Ù…ØªØ§Ø­Ø© Ù„Ø®Ø¯Ù…ØªÙƒÙ… â€” Ù…Ù†ØªØ¬Ø§Øª Ø·Ø¨ÙŠØ©ØŒ Ù…Ø³ØªÙ„Ø²Ù…Ø§ØªØŒ ÙˆÙ†ØµØ§Ø¦Ø­ ØµØ­ÙŠØ© Ø³Ø±ÙŠØ¹Ø©. Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† ÙˆØ³Ù†ÙˆØµÙ„Ùƒ.';
        document.getElementById('modalTitle').innerText = 'Ø·Ù„Ø¨ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†';
        renderProducts('ar');
      }else{
        document.documentElement.lang = 'en';
        document.documentElement.dir = 'ltr';
        document.getElementById('heroTitle').innerText = `Welcome to ${PHARMACY_NAME}`;
        document.getElementById('heroDesc').innerText = 'Your local pharmacy â€” medicines, personal care, and quick advice. Order now.';
        document.getElementById('modalTitle').innerText = 'Online Order';
        renderProducts('en');
      }
    }

    // Initialize from localStorage or defaults
    const savedTheme = localStorage.getItem('theme') || 'light';
    setTheme(savedTheme);
    const savedLang = localStorage.getItem('lang') || 'ar';
    setLang(savedLang);

    themeBtn.addEventListener('click',()=> setTheme(document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark'));
    langBtn.addEventListener('click',()=> setLang(document.documentElement.lang==='ar'?'en':'ar'));

    // Smooth scroll for nav
    document.querySelectorAll('a[data-scroll]').forEach(a=>{
      a.addEventListener('click',(e)=>{
        e.preventDefault();
        const id = a.getAttribute('href').slice(1);
        document.getElementById(id).scrollIntoView({behavior:'smooth'});
      });
    });

    // render initial products
    renderProducts(localStorage.getItem('lang')==='en' ? 'en':'ar');
  </script>
</body>
  </html>
  
